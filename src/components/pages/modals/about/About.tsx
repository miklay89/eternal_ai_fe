import { Dispatch, SetStateAction, useState } from "react";
import { MainLogo, MenuCloseIcon } from "../../../common/header/Header.styles";
import {
  Check,
  CheckBox,
  CheckBoxText,
  CheckBoxWrapper,
  ContinueBtn,
  Description,
  InnerWrapper,
  LogoWrapper,
  ModalCloseBtnWrapper,
  ModalNavWrapper,
  ModalWrapper,
  OuterWrapper,
  Title,
} from "./About.styles";
import Bagel from "../../../common/header/bagel/Bagel";
import scrollToTop from "../../../hooks/scrollToTop";
import { useLocation, useNavigate } from "react-router-dom";
import { Paths } from "../../../../routes/root";

type Dispatcher<S> = Dispatch<SetStateAction<S>>;

type Props = {
  isOpen: boolean;
  onClickClose: Dispatcher<string | null>;
};

const About = (props: Props) => {
  const [isChecked, setIsChecked] = useState<boolean>(false);
  const location = useLocation();
  const navigate = useNavigate();

  const handleClickLogo = (e: React.MouseEvent) => {
    e.preventDefault();
    if (location.pathname === Paths.HOME) {
      props.onClickClose(null);
      scrollToTop();
    } else {
      navigate(Paths.HOME);
      scrollToTop();
    }
  };

  const handleClickContinue = (e: React.MouseEvent) => {
    e.preventDefault();
    if (!isChecked) {
      alert("checkbox required");
      return;
    }
    props.onClickClose(null);
  };

  return (
    <ModalWrapper isOpen={props.isOpen}>
      <ModalNavWrapper>
        <LogoWrapper onClick={(e) => handleClickLogo(e)}>
          <Bagel />
          <MainLogo src="/eternal.svg" />
        </LogoWrapper>
        <ModalCloseBtnWrapper onClick={() => props.onClickClose(null)}>
          <MenuCloseIcon src="/header/close_btn.svg" />
        </ModalCloseBtnWrapper>
      </ModalNavWrapper>
      <OuterWrapper>
        <InnerWrapper>
          <Title>About the platform</Title>
          <Description>
            All of the characters here are not real. Everything you see and hear
            is entirely generated by Artificial Intelligence machines. The
            opinions and beliefs expressed do not represent anyone. They are
            hallucinations of a bunch of 1s and 0s inside of a magic computer.
            <br />
            <br />
            The creators of this platform have the best intentions with this
            project, and deeply admire each and every character on the site. You
            might even say they are our Heroes. In fact, you can say that.
          </Description>
          <CheckBoxWrapper>
            <CheckBox onClick={() => setIsChecked((prev) => !prev)}>
              <Check isChecked={isChecked} src="/check.svg" />
            </CheckBox>
            <CheckBoxText>I have read the above statement</CheckBoxText>
          </CheckBoxWrapper>
          <ContinueBtn onClick={(e) => handleClickContinue(e)}>
            continue
          </ContinueBtn>
        </InnerWrapper>
      </OuterWrapper>
    </ModalWrapper>
  );
};

export default About;
